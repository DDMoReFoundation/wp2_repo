<?xml version = "1.0"?>
<project name = "TechnicalSpecification-DDMoReModelRepository" default = "pdf" basedir = "." >
    <!-- no need to add .tex-->
    <property name = "mainTexFile" value = "technical-specification"/>

    <target name = "run">
        <echo message="Running ${cmd} ${cmdArgument}.${line.separator}"/>
        <exec executable    = "${cmd}" 
                searchpath  = "true" 
                output      = "ant.out.log" 
                error       = "ant.err.log" 
                append      = "true" 
                failonerror = "true">
            <arg value = "${cmdArgument}"/>
        </exec>
    </target>

    <target name = "pdf" depends = "clean">
        <antcall target = "run">
            <param name = "cmd" value = "pdflatex"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
        <antcall target = "run">
            <param name = "cmd" value = "makeglossaries"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
        <antcall target = "run">
            <param name = "cmd" value = "pdflatex"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
        <antcall target = "run">
            <param name = "cmd" value = "makeglossaries"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
        <antcall target = "run">
            <param name = "cmd" value = "pdflatex"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
        <antcall target = "run">
            <param name = "cmd" value = "bibtex"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
        <antcall target = "run">
            <param name = "cmd" value = "pdflatex"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
        <antcall target = "run">
        <param name = "cmd" value = "pdflatex"/>
        <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
    </target>

    <target name = "clean">
        <delete>
            <fileset dir = "." includes = "**/*.aux,**/*.bbl,**/*.blg,**/*.glg,**/*.glo,**/*.ist,**/*.log,**/*.lot,**/*.out,**/*.toc"/>
        </delete>
    </target>

    <target name = "pdfNoGlossary" depends = "clean" >
        <antcall target = "run">
            <param name = "cmd" value = "pdflatex"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
        <antcall target = "run">
            <param name = "cmd" value = "bibtex"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
        <antcall target = "run">
            <param name = "cmd" value = "pdflatex"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
        <antcall target = "run">
            <param name = "cmd" value = "pdflatex"/>
            <param name = "cmdArgument" value = "${mainTexFile}"/>
        </antcall>
    </target>

</project>
