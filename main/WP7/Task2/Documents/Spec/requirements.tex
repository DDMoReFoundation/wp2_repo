%------------------------------------------------------------------------------
%Description       : DDMoRe WP7.2.1 First Technical Specification for the Model
%                                   Repository Infrastructure - Requirements Survey 
%Authors           : Mihai Glon»õ <mglont@ebi.ac.uk>
%                    Camille Laibe <laibe@ebi.ac.uk>
%Organization      : EMBL-EBI
%                    Wellcome Trust Genome Campus
%                    Hinxton
%                    Cambridge
%                    United Kingdom
%------------------------------------------------------------------------------
\section{Requirements}
\label{requirements}
This section lists the needs, goals and constraints of the \ddmore Model Repository, grouped into two main categories: the former is dedicated to \glspl{functionalRequirement}, while the latter contains \glspl{nonFunctionalRequirement}. 

\subsection{Functional requirements}
\label{functionalRequirements}
%% Create a row counter so that we don't have to keep track of the ID of the functional requirement http://tex.stackexchange.com/questions/21243/automatic-table-row-numbers/21244#21244
%\newcounter{frCounter}
%\newcommand\frIndex{\stepcounter{frCounter}\arabic{frCounter}}

\begin{enumerate}[1]
\subsubsection{Model management}
\item The system is REQUIRED to store models encoded in \gls{MML}. Supplementary data files, processing scripts, textual and graphical representations of results, as well as reports SHOULD also be kept in the system. In addition, the concept of a project SHOULD be provided, grouping together related models. 

\item The system MUST allow appropriate users to store updated versions of models encoded in MML.

\item The system SHOULD maintain a record of the submissions of a given model to regulatory bodies including, but not limited to FDA, EMA, MHRA. The Repository SHOULD provide open access to the model's public assessment report or summary basis for approval if such reports exist. 

\item The system MUST be able to store relations and dependencies between different models.

\item The system MAY allow specific \glspl{revision} to be deleted by their owners, but no revision SHALL be lost from the Repository. In this case, users that had access to a model revision before its deletion SHALL continue to do so. The system SHOULD inform the user about the removal and MAY supply a link to a model revision which replaces it, if this information has been specified by the user that performed the deletion. 

\item Authenticated users SHOULD be able to subscribe to notifications about a model they have access to when it is updated.

\item The system MUST enable the creation of new models encoded in MML based on either an existing one, or a template. The system SHALL record for the new model a reference  to the representation from which it derives.

\item Models SHOULD be classified using descriptive and categorical tags, such as the ones done as part of WP4.

\item All versions of a given model MUST be preserved and be accessible.

\item The system SHALL ensure that in the event of concurrent modifications of the same model(s), neither set of changes is lost.

\item Models MAY be modified via an integrated editor.

\subsubsection{Model browsing, searching and retrieving}
\item The system MUST be able to search for the latest revision of model descriptions based on a textual term such as name, author, date of creation, date of modification, or any other textual field in MML. The results MUST only include models to which the user has access to. The system SHOULD also provide a configuration option that allows every version of every accessible model to be included in the model search.

% Topics are expressed using metadata. We already have requirements for including annotations in the search and for downloading a selection of models.
%\item The system MUST allow the retrieval of all models dealing with a certain topic. 

\item The system MAY allow a selection of search results, bundled as an archive, to be downloaded.

\item Users MAY be able to inspect differences between different versions of the same model.

\item The system MAY allow a selection of two models to be compared against a user-specified set of criteria.

\item Models and associated graphical representations stored as PNG or JPEG files MUST be displayed in an organised and user-friendly manner. This SHOULD include an export from the graphical viewer for MDL developed within Task 2.5.1, if such an export has been provided.

\item The inputs and outputs accompanying a model (included in the MML representation) MUST also be displayed along with an explanation. 

\item Users SHALL be able to retrieve and download any revision of any model they can access.

\item Model search SHOULD include model metadata such as annotations and tags.

\item The system SHOULD be able to search for models based on complex queries. Results SHOULD be ranked, for instance by using a combination of text retrieval, ontologies as well as model metadata as described in \cite{Henkel2010} and \cite{Schulz2011}. 

\subsubsection{Model quality}
\item The system is REQUIRED to check that model representations are faithful to the MML specification either on-demand -- upon request, or autonomously -- whenever the need arises, such as before accepting a new revision for a model. 

\item The system MUST accommodate a system of reviews and more informal comments. The presence of reviews could be used as a criterion for comparing models.

\item The system MAY indicate whether a model runs successfully or not on. If this feature is implemented, the system SHOULD NOT allow a model to be reviewed or published unless it can be simulated locally. 

\subsubsection{Authentication and authorisation}
\item The system MUST authenticate users and ensure that they can only perform the role assigned to them for a given model (cf. Section~\ref{users}).

\item The Repository MUST maintain a model \gls{audit trail}, storing each revision with additional information about its content including, but not limited to the identity of the user performing the action and a timestamp. Users MAY add a comment describing the changes they introduce. The level of detail of this information SHOULD be configurable at the level of the instance by an Administrator. 

\item The level of visibility of the audit information associated with a published model SHOULD be configurable at the level of the instance by an Administrator.

\item For the safety and integrity of the Repository, a system-wide audit trail, that MUST only be available to Administrators, MUST record security-relevant events including but not limited to changes to model data, metadata, ownership, or access rights. 

\item A model owner MUST be allowed to grant read and write access to a model using one of the following options:
\begin{inparaenum}
\item a single revision 
\item all existing revisions 
\item all revisions including the ones in the future. 
\end{inparaenum} 

\item Once granted, read rights to a revision for a particular user SHALL NOT be revoked: once users have gained read access to a model, they might have already collected all relevant information.

\item The system MUST enable model owners to revoke write access to future revisions of a model for a single user or group of users simultaneously.

\item The system MUST enable model owners to publish a single version of a model. This action SHALL not impact the status of previous model revisions. 

\item The Owner SHOULD be able to grant write access to an unpublished model to a single user, or to a group of users. This would allow Editors to upload new model revisions. The system is then REQUIRED to automatically grant read and write access to a revision for the Editor who uploaded it.

\item A model owner SHOULD be allowed to transfer the complete ownership of a model to another existing user.

\item The owner SHOULD be able to control the access rights of other users to read or write the model.

\item Unauthenticated access to the published models in the system SHOULD be permitted as a configuration option. If this option is disabled, users MUST be authenticated before they can access any models within the system.

\item The system MUST be protected against SQL injection, cross-site scripting as well as cross-site request forgery attacks. 

\subsubsection{Interaction with the Interoperability Framework}
\item Programmatic access to models within the Repository MUST be provided to other software systems including, but not limited to those within \ddmore. In particular, the interoperability platform developed within WP2 MUST be able to load models from the system. This SHOULD be accomplished by means of web services and/or messaging queues. 

\item The system MAY enable a user to launch the simulation of a model with their own data sets using their local Infrastructure. 

\subsubsection{Technology}
\item The system SHALL store models represented in MML format.

\item The server side of the system is REQUIRED to work on a GNU Linux platform with kernel version~$\ge 2.6$. 

\item The client side SHALL work with the following operating systems: Mac OS X (Leopard, Version 10.5.x and newer versions), Windows (Windows XP and newer versions), GNU Linux (kernel version~$\ge 2.6$).

\item The client side MUST work with the following web browsers: Safari Version 5.x and above, Internet Explorer 8 and above, Firefox Version 10.x and above. The front end MAY work in other browsers.

\item An established software version control system such as Subversion, Mercurial or Git MAY be used by the system internally, however, it MUST NOT be exposed to users directly.

%% user management requirements are missing from the original document
\subsubsection{User management}
\item An administrator MUST be able to manage user accounts. This covers creation, suspension, deletion, blocking or unblocking.

\item The system MUST allow an authenticated user or administrator to update certain details of an account including but not limited to password, name, contact details. Due care MUST be taken to ensure that the user confirms their identity before editing this information.
\end{enumerate}

\subsection{Non-functional requirements}
\label{nonFunctionalRequirements}
\begin{enumerate}[1]
\setcounter{enumi}{50}
% TODO: should we actually put that?
%\item The system MUST be responsive, completing 80\% of requests in under 10 seconds and 95\% of requests in under 30 seconds on a computer with 2GB RAM, dual-core processor and 1Mb/s Internet connection.

\item The user interface of the system SHALL be designed with usability in mind, displaying information in a meaningful and user-friendly manner to its stakeholders, without overloading them.

\item The system MUST provide meaningful user information in case of an error. If the error is caused by the system (rather than the user), the system MUST log all necessary information in order to allow a fix to be developed.

\item The look and feel of the Repository MUST be configurable by means of skins.

\item The system SHALL notify users when a request cannot be processed immediately, either by indicating the progress or by notifying the user when the process has been completed.

\item The system SHALL be implemented using modern presentation and accessibility standards in order to aid maintainability.

\item The system SHOULD be installable and configurable as a software distribution.

\item The system SHOULD be modular and allow extension.
\end{enumerate}
