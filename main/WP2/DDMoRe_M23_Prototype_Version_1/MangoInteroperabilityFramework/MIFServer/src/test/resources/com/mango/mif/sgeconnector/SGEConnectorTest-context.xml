<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jee="http://www.springframework.org/schema/jee"
	xmlns:jms="http://www.springframework.org/schema/jms" xmlns:oxm="http://www.springframework.org/schema/oxm"
	xmlns:p="http://www.springframework.org/schema/p" 
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="
    http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-3.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/jms http://www.springframework.org/schema/jms/spring-jms.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

	<bean class="com.mango.mif.utils.MIFPropertyPlaceholderConfigurer">
		<property name="ignoreResourceNotFound" value="true" />
		<property name="ignoreUnresolvablePlaceholders" value="true"/>
  
        <!-- Ignore validation of properties set in the tests -->
        <property name="validatePropertiesOnStart" value="false"/>
        
		<property name="systemPropertiesModeName"><value>SYSTEM_PROPERTIES_MODE_OVERRIDE</value></property>
		<property name="locations">
			<list>
				<value>classpath:com/mango/mif/sgeconnector/connector.properties</value>
			</list>
		</property>
	</bean>
	
    <import resource="test-hibernate-context.xml"/>
    
    <bean id="jmsErrorHandler" class="com.mango.mif.utils.JMSErrorHandler"/>
    
    <bean id="templateLocator" class="com.mango.mif.core.exec.template.DirectoryTemplateLocator">
        <property name="commandTemplateDirectory" value="${mif.templatesDirectory}"/>
    </bean>
		
	<bean id="sharedLocationManager" class="com.mango.mif.core.resource.UserSharedLocationManager">
		<property name="workspaceManager">
			<bean class="com.mango.mif.core.impl.DefaultWorkspaceManager">
				<constructor-arg>
					<bean class="java.io.File">
						<constructor-arg value="${mif.shared.location}"></constructor-arg>
					</bean>
				</constructor-arg>
			</bean>
		</property>
	</bean>
	
    <bean id="jobManagementService" class="com.mango.mif.managers.JobManagementServiceImpl">
        <property name="sharedLocationManager" ref="sharedLocationManager" />
        <property name="mifServiceAccountUserName" value="${mif.serviceAccount.userName}" />
        <property name="mifServiceAcccountPassword" value="${mif.serviceAccount.userPassword}" />
        <property name="jobInvokerProvider" ref="jobInvokerProvider" />
        <property name="jobRepository" ref="jobRepository" />        
    </bean>
    
    <bean id="jobRepository" class="com.mango.mif.connector.dao.JobRepository"/>           
    
    <bean id="jobInvokerProvider" class="com.mango.mif.connector.runner.impl.BasicJobInvokerProvider">
        <property name="invokerFactory" ref="invokerFactory"/>
    </bean>
    
	<bean id="encrypter" class="com.mango.mif.utils.encrypt.DesEncrypter">
    	<constructor-arg value="classpath:/com/mango/mif/utils/encrypt/defaultDesKey.key"/>
    </bean>
    
</beans>