# Flag specifying if a request should be executed in the request directory or it should use input/output folders and inputs be copied to sge shared location
mif.runInRequestDir=false


# The internal ActiveMQ MIF queues used for job queuing
mif.requestQueue = JOB.REQUEST
mif.responseQueue = JOB.RESPONSE
mif.cancelQueue = JOB.CANCEL

########################################################################################
# The directories for the customisation scripts
########################################################################################

mif.commonScriptsDirectory=/runtime/scripts/common
mif.sgeInitialisationScriptFullPath=/runtime/scripts/common/sge.sh
mif.genericScriptsDirectory=/runtime/scripts/generic
mif.templatesDirectory=/runtime/templates

########################################################################################
# The path to the script which will initialise all the shell variables required by SGE
########################################################################################

mif.sgeInitialisationScriptFullPath=/runtime/scripts/common/sge.sh

########################################################################################
# The invoker properties used for executing commands on the underlying operating system
########################################################################################

# The SGE job runner state machine configuration, this defines the various states a job will progress through
connector.driver.scxml=classpath:/META-INF/SGEJobRunner.scxml

# A thread pool to which state handlers of a JobRunner are being scheduled
# WARNING: The pool size should always be 1.  
# Never increase this or you will see race conditions with database 
# constraint errors and optimistic lock exceptions
connector.jobRunnerStateHandlersTaskExecutor.corePoolSize=1
connector.jobRunnerStateHandlersTaskExecutor.maxPoolSize=1
connector.jobRunnerStateHandlersTaskExecutor.queueCapacity=25


# The pre-processor script run before each MIF script 
connector.scriptPreamble=source preamble.sh

########################################################################################
# The invoker properties used for executing commands on the underlying operating system
########################################################################################

# The hostname to SSH to, default: localhost  
connector.jschInvoker.host=localhost

# The port to SSH to, default: localhost
connector.jschInvoker.port=22

# The protcols to try (in order) when connecting to the host:port
connector.jschInvoker.protocols=gssapi-with-mic,publickey,keyboard-interactive,password


########################################################################################
# CONNECTOR: General SGE Settings
########################################################################################

# The shared location (used to copy files from the MIF shared directory to).
# This is generally a folder mouted via NFS/FUSE that is visible to the grid
sgeconnector.sgeSharedLocation=

# Polling rate between issuing the SGE qstat command
sgeconnector.sgePollingRate=5000

# Error files produced by the qsub command
sgeconnector.sgeJobStdErrFileName=MIF.stderr

# Output files produced by the qsub command
sgeconnector.sgeJobStdOutFileName=MIF.stdout

# Output of the SGE qacct command
sgeconnector.sgeJobFinalStatusFileName=MIF.qacct

# List of modified files produced during a job execution
sgeconnector.sgeJobModifiedFilesListFileName=MIF.modified.file.list

# MIF hidden directory name for grid error/output that may not be visible to the end user
sgeconnector.sgeHiddenMifDirectoryName=.MIF

# A prefix being added to request id when creating a request working directory on grid share
sgeconnector.sgeRequestDirectoryPrefix=MIF-

# Command configurations for parsing output from various SGE commands
sgeconnector.regexp.queue-accounting-command.job-not-found=error: job id \\d+ not found
sgeconnector.regexp.queue-accounting-command.extract-info=([^\\s]+)\\s*(.*)
sgeconnector.regexp.queue-status-command.job-not-found=Following jobs do not exist.*
sgeconnector.regexp.queue-status-command.extract-info=([^:]+):\\s*(.*)
sgeconnector.regexp.queue-submit-command.extract-job-id=Your job ([\\d]+)([^\\d].+)?
sgeconnector.regexp.queue-delete-command.job-not-found=does not exist
sgeconnector.regexp.queue-delete-command.extract-info=registered the job \\d+ for deletion
sgeconnector.regexp.commandNotFound=.*command not found.*
sgeconnector.regexp.invalidUsage=.*usage:.*
sgeconnector.regexp.queue-status-command.error=.*error.*
sgeconnector.qstatTimeFormat=EEE MMM dd HH:mm:ss yyyy

# Command templates for SGE (used in combination with the command configurations)
sgeconnector.qsubScriptTemplate=common/qsub.ftl
sgeconnector.qstatScriptTemplate=common/qstat.ftl
sgeconnector.qacctScriptTemplate=common/qacct.ftl
sgeconnector.task-postprocessingStateHandler.qacctScriptTemplate=common/task-finished-qacct.ftl
sgeconnector.qdelScriptTemplate=common/qdel.ftl
sgeconnector.getCommandOutputTemplate=common/get-job-output.ftl
sgeconnector.publishHandlerTemplate=generic/publishHandler.ftl
sgeconnector.prepareHandlerTemplate=generic/prepareHandler.ftl
sgeconnector.retrieveHandlerTemplate=generic/retrieveHandler.ftl
sgeconnector.runningSummaryMessageTemplate=generic/running-summary-message.ftl
sgeconnector.completedSummaryMessageTemplate=generic/completed-summary-message.ftl
sgeconnector.cancelledSummaryMessageTemplate=generic/cancelled-summary-message.ftl
sgeconnector.failedSummaryMessageTemplate=generic/failed-summary-message.ftl
sgeconnector.submitScriptName=MIF-submitter.sh
sgeconnector.retrieveChildJobsDetailsScriptTemplate=generic/retrieveChildJobsDetails.ftl
sgeconnector.retrieveChildJobsIdsScriptTemplate=generic/retrieveChildJobsIds.ftl
sgeconnector.startupSummaryMessage=STARTUP
sgeconnector.unavailableSummaryMessage=Summary not available.

########################################################################################
# CONNECTOR: R
########################################################################################
rsgeconnector.connectorId=R.SGE
rsgeconnector.requestQueue=R.SGE.JOB.REQUEST
rsgeconnector.jobResultQueue=R.SGE.JOB.RESULT
rsgeconnector.responseQueue=JOB.RESPONSE
rsgeconnector.jobCancelQueue=R.SGE.JOB.CANCEL
rsgeconnector.scriptExecutablePath=/usr/bin/Rscript
rsgeconnector.submitScriptTemplate=rsgeconnector/submitter.ftl

# The number of task executors available to handle jobs
rsgeconnector.jobRunnersTaskExecutor.corePoolSize=1
rsgeconnector.jobRunnersTaskExecutor.maxPoolSize=5
rsgeconnector.jobRunnersTaskExecutor.queueCapacity=25

########################################################################################
# CONNECTOR: NONMEM
########################################################################################
nonmemsgeconnector.connectorId=NONMEM.SGE
nonmemsgeconnector.requestQueue=NONMEM.SGE.JOB.REQUEST
nonmemsgeconnector.jobResultQueue=NONMEM.SGE.JOB.RESULT
nonmemsgeconnector.responseQueue=JOB.RESPONSE
nonmemsgeconnector.jobCancelQueue=NONMEM.SGE.JOB.CANCEL
nonmemsgeconnector.scriptExecutablePath=/usr/global/NONMEM7/util/nmfe7
nonmemsgeconnector.submitScriptTemplate=nonmemsgeconnector/nonmem-submitter.ftl
nonmemsgeconnector.task-finishedStateHandler.validateNonmemResultsTemplate=nonmemsgeconnector/validateNonmemOutputs.ftl
nonmemsgeconnector.connectorScriptsDirectory=/runtime/scripts/nonmemsgeconnector
nonmemsgeconnector.runningSummaryMessageTemplate=nonmemsgeconnector/running-summary-message.ftl
nonmemsgeconnector.completedSummaryMessageTemplate=nonmemsgeconnector/completed-summary-message.ftl
nonmemsgeconnector.lstFileExtension=.lst
nonmemsgeconnector.qdelScriptTemplate=nonmemsgeconnector/qdel.ftl

# The number of task executors available to handle jobs
nonmemsgeconnector.jobRunnersTaskExecutor.corePoolSize=1
nonmemsgeconnector.jobRunnersTaskExecutor.maxPoolSize=5
nonmemsgeconnector.jobRunnersTaskExecutor.queueCapacity=25

########################################################################################
# CONNECTOR: CMD SGE
########################################################################################
cmdsgeconnector.connectorId=CMD.SGE
cmdsgeconnector.requestQueue=CMD.SGE.JOB.REQUEST
cmdsgeconnector.jobResultQueue=CMD.SGE.JOB.RESULT
cmdsgeconnector.responseQueue=JOB.RESPONSE
cmdsgeconnector.jobCancelQueue=CMD.SGE.JOB.CANCEL
cmdsgeconnector.submitScriptTemplate=cmdsgeconnector/cmd-submitter.ftl
cmdsgeconnector.failedSummaryMessageTemplate=cmdsgeconnector/failed-summary-message.ftl

# The number of task executors available to handle jobs
cmdsgeconnector.jobRunnersTaskExecutor.corePoolSize=1
cmdsgeconnector.jobRunnersTaskExecutor.maxPoolSize=5
cmdsgeconnector.jobRunnersTaskExecutor.queueCapacity=25

########################################################################################
# CONNECTOR: PsN * (Common properties for all PsN connectors)
########################################################################################
# the pattern is assumed to return an output directory name in last capture group
psnsgeconnector.directoryOptionPattern=-directory=((\"([\\-\\w\\ \\:\\.]+)\")|([\\-\\w\\.]+))

########################################################################################
# CONNECTOR: PsN VPC (Visual Predictive Check)
########################################################################################
psnvpcsgeconnector.connectorId=PSN_VPC.SGE
psnvpcsgeconnector.requestQueue=PSN_VPC.SGE.JOB.REQUEST
psnvpcsgeconnector.jobResultQueue=PSN_VPC.SGE.JOB.RESULT
psnvpcsgeconnector.responseQueue=JOB.RESPONSE
psnvpcsgeconnector.jobCancelQueue=PSN_VPC.SGE.JOB.CANCEL
psnvpcsgeconnector.scriptExecutablePath=/usr/global/grid/bin/execute.sh
psnvpcsgeconnector.submitScriptTemplate=psnvpcsgeconnector/psn-submitter.ftl
psnvpcsgeconnector.task-finishedStateHandler.validateResultsTemplate=psnsgeconnector/validatePsNOutputs.ftl
psnvpcsgeconnector.runningSummaryBuilderTemplate=psnvpcsgeconnector/running-summary-message.ftl
psnvpcsgeconnector.completedSummaryBuilderTemplate=psnvpcsgeconnector/completed-summary-message.ftl

# The number of task executors available to handle jobs
psnvpcsgeconnector.jobRunnersTaskExecutor.corePoolSize=1
psnvpcsgeconnector.jobRunnersTaskExecutor.maxPoolSize=5
psnvpcsgeconnector.jobRunnersTaskExecutor.queueCapacity=25

########################################################################################
# CONNECTOR: PsN Scm (Stepwise Covariate Modelling)
########################################################################################
psnscmsgeconnector.connectorId=PSN_SCM.SGE
psnscmsgeconnector.requestQueue=PSN_SCM.SGE.JOB.REQUEST
psnscmsgeconnector.jobResultQueue=PSN_SCM.SGE.JOB.RESULT
psnscmsgeconnector.responseQueue=JOB.RESPONSE
psnscmsgeconnector.jobCancelQueue=PSN_SCM.SGE.JOB.CANCEL
psnscmsgeconnector.scriptExecutablePath=/usr/global/grid/bin/execute.sh
psnscmsgeconnector.submitScriptTemplate=psnscmsgeconnector/psn-submitter.ftl
psnscmsgeconnector.task-finishedStateHandler.validateResultsTemplate=psnsgeconnector/validatePsNOutputs.ftl
psnscmsgeconnector.runningSummaryBuilderTemplate=psnscmsgeconnector/running-summary-message.ftl
psnscmsgeconnector.completedSummaryBuilderTemplate=psnscmsgeconnector/completed-summary-message.ftl
psnscmsgeconnector.scmLogFileName=scmlog1.txt

# The number of task executors available to handle jobs
psnscmsgeconnector.jobRunnersTaskExecutor.corePoolSize=1
psnscmsgeconnector.jobRunnersTaskExecutor.maxPoolSize=5
psnscmsgeconnector.jobRunnersTaskExecutor.queueCapacity=25

########################################################################################
# CONNECTOR: PsN Bootstrap
########################################################################################

psnbootstrapsgeconnector.connectorId=PSN_Bootstrap.SGE
psnbootstrapsgeconnector.requestQueue=PSN_Bootstrap.SGE.JOB.REQUEST
psnbootstrapsgeconnector.jobResultQueue=PSN_Bootstrap.SGE.JOB.RESULT
psnbootstrapsgeconnector.responseQueue=JOB.RESPONSE
psnbootstrapsgeconnector.jobCancelQueue=PSN_Bootstrap.SGE.JOB.CANCEL
psnbootstrapsgeconnector.scriptExecutablePath=/usr/global/grid/bin/execute.sh
psnbootstrapsgeconnector.submitScriptTemplate=psnbootstrapsgeconnector/psn-submitter.ftl
psnbootstrapsgeconnector.task-finishedStateHandler.validateResultsTemplate=psnsgeconnector/validatePsNOutputs.ftl
psnbootstrapsgeconnector.completedSummaryBuilderTemplate=psnbootstrapsgeconnector/completed-summary-message.ftl
psnbootstrapsgeconnector.runningSummaryBuilderTemplate=psnbootstrapsgeconnector/running-summary-message.ftl
psnbootstrapsgeconnector.runningJobInfoBuilderTemplate=generic/retrieveChildJobsDetails.ftl
psnbootstrapsgeconnector.qdelChildJobsCommandTemplate=psnbootstrapsgeconnector/qdel-child.ftl

# The number of task executors available to handle jobs
psnbootstrapsgeconnector.jobRunnersTaskExecutor.corePoolSize=1
psnbootstrapsgeconnector.jobRunnersTaskExecutor.maxPoolSize=5
psnbootstrapsgeconnector.jobRunnersTaskExecutor.queueCapacity=25

###############################
# Session pool parameters
###############################
#Max active sessions per user
mif.sessionpool.maxActive=10
#Max idle sessions per user
mif.sessionpool.maxIdle=5
#Minimum number of idle sessions per user
mif.sessionpool.minIdle=0
#Maximum number of sessions for ALL users. '-1' - no limit
#When the maximum number is reached, pool will kill the potentially active session
mif.sessionpool.maxTotal=150
# 1 - WHEN_EXHAUSTED_BLOCK
mif.sessionpool.whenExhaustedAction=1
mif.sessionpool.timeBetweenEvictionRunsMillis=5000
#Keep a session alive for 30 minutes
mif.sessionpool.minEvictableIdleTimeMillis=1800000
mif.sessionpool.numTestsPerEvictionRun=50
mif.sessionpool.testOnReturn=false
mif.sessionpool.testWhileIdle=true
mif.sessionpool.lifo=true
